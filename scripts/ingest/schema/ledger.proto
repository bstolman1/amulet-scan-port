syntax = "proto3";

package ledger;

// Represent a single event
message Event {
  string id = 1;
  string update_id = 2;
  string type = 3;
  string synchronizer = 4;

  int64 effective_at = 5;  // Unix epoch millis
  int64 recorded_at = 6;

  string contract_id = 7;
  string party = 8;
  string template = 9;

  string payload_json = 10; // raw payload as JSON string
  
  repeated string signatories = 11;
  repeated string observers = 12;
  string package_name = 13;
  
  string raw_json = 14; // Complete original event as JSON (all data)
}

// Represent a single update
message Update {
  string id = 1;
  string synchronizer = 2;

  int64 effective_at = 3;
  int64 recorded_at = 4;

  string transaction_id = 5;
  string command_id = 6;
  string workflow_id = 7;

  string status = 8;
}

// A batch of records written together
message EventBatch {
  repeated Event events = 1;
}

message UpdateBatch {
  repeated Update updates = 1;
}
